<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <link rel="stylesheet" href="style.css">

</head>
<body>

<h1>Hello</h1>


<button id="one" class="first-btn solid_pay_btn">First pay</button>
<button id="two" class="second-btn pay_btn" style="background-color: #4eb422">Second pay</button>
<button id="three" class="second-btn pay_btn" style="background-color: #666666">Last pay</button>

<script type="text/javascript">

    var oneData = {
        src: 'payment_widget_first.js',
        id: 'one',
        title: 'Перша форма ',
        description: 'Якись опис'
    };

    var twoData = {
        src: 'payment_widget.js',
        id: 'two',
        title: 'Друга форма ',
        description: 'Якись опис'
    };

    var threeData = {
        src: 'payment_widget_last.js',
        id: 'three',
        title: 'Третя форма ',
        description: 'Якись опис'
    };


    function changeScript(data, btn) {
        var newScript = document.createElement("script");
        newScript.src = data.src;
        newScript.setAttribute('data-script', 'btn_script');
        newScript.setAttribute('data-btn-id', data.id);
        newScript.setAttribute('data-title', data.title);
        newScript.setAttribute('data-description', data.description);

        const script = document.querySelector('[data-script="btn_script"]');

        if (script) {
            script.remove();
        }

        document.body.appendChild(newScript);

        newScript.onload = function () {
            btn.click()
        };


    }

    var firstBtn = document.querySelector('#one'),
        secondBtn = document.querySelector('#two'),
        lastBtn = document.querySelector('#three');

    firstBtn.addEventListener('click', function () {
        var script = document.querySelector('[data-script="btn_script"]');

        if (!script || (script && script.getAttribute('data-btn-id') !== oneData.id)) {
            changeScript(oneData, firstBtn)
        }


    })


    secondBtn.addEventListener('click', function () {
        var script = document.querySelector('[data-script="btn_script"]');

        if (!script || (script && script.getAttribute('data-btn-id') !== twoData.id)) {
            changeScript(twoData, secondBtn)

        }


    })


    lastBtn.addEventListener('click', function () {
        var script = document.querySelector('[data-script="btn_script"]');

        if (!script || (script && script.getAttribute('data-btn-id') !== threeData.id)) {
            changeScript(threeData, lastBtn)

        }


    })

</script>


<!--<script src="payment_widget_first.js"-->
<!--data-script="btn_script"-->
<!--data-btn-id="solid_pay_btn"-->
<!--data-overlay="true"-->
<!--data-title="First payment"-->
<!--data-description="Boost premium"-->
<!--&gt;</script>-->


<script>

    document.addEventListener('closeWidget', function (ev) {
        console.log('WIDGET CLOSE MFK');
    });

    document.addEventListener('openWidget', function (ev, data) {
        console.log('WIDGET OPEN MFK');
        console.log(ev);
    });

    document.addEventListener('payment', function (ev, data) {
        console.log(data);
        console.log(ev);
    });


    window.addEventListener('message', function (msg) {
        console.log(msg, 'message parent window from index.html');
    }, false)

    window.addEventListener('onmessage', function (msg) {
        console.log(msg, 'onmessage parent window from index.html');
    }, false)

</script>


</body>
</html>