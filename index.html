<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <link rel="stylesheet" href="style.css">

</head>
<body>


<button id="solid_pay_btn" class="first-btn solid_pay_btn">First pay</button>
<button id="pay_btn" class="second-btn pay_btn" style="background-color: #4eb422">Second pay</button>

<script type="text/javascript">
        const script = document.querySelector('[data-script="btn_script"]');

    var firstData = {
        src: '/payment_widget_first.js',
        id: 'solid_pay_btn',
        title: 'Перша платьожка блеать',
        description: 'Якись опис'
    }

    var secondData = {
        src: '/payment_widget.js',
        id: 'solid_pay_btn',
        title: 'Друга платьожка блеать',
        description: 'Якись опис'
    }


    function changeScript(data) {
        console.log(data)

        var newScript = document.createElement("script");
        newScript.src = data.src;
        newScript.setAttribute('data-script', 'btn_script')
        newScript.setAttribute('data-btn-id', data.id)
        newScript.setAttribute('data-title', data.title)
        newScript.setAttribute('data-description', data.description)

        const script = document.querySelector('[data-script="btn_script"]');
        var modal = document.querySelector('#solid__modal');
        if (script) {
            script.remove();
        }

        if (modal){
            modal.remove()
        }


        document.body.appendChild(newScript);


    }


    document.querySelector('.first-btn').addEventListener('click', function () {

        if(script && script.dataset.btnId !== firstData.id){
            changeScript(firstData)
        }

    })


    document.querySelector('.second-btn').addEventListener('click', function () {
        if(script && script.dataset.btnId !== secondData.id){
            changeScript(secondData)
        }
    })


</script>


<!--<script src="payment_widget_first.js"-->
<!--data-script="btn_script"-->
<!--data-btn-id="solid_pay_btn"-->
<!--data-overlay="true"-->
<!--data-title="First payment"-->
<!--data-description="Boost premium"-->
<!--&gt;</script>-->


<script>

    document.addEventListener('closeWidget', function (ev) {
        console.log('WIDGET CLOSE MFK');
    });

    document.addEventListener('openWidget', function (ev, data) {
        console.log('WIDGET OPEN MFK');
        console.log(ev);
    });

    document.addEventListener('payment', function (ev, data) {
        console.log(data);
        console.log(ev);
    });


    window.addEventListener('message', function (msg) {
        console.log(msg, 'message parent window from index.html');
    }, false)

    window.addEventListener('onmessage', function (msg) {
        console.log(msg, 'onmessage parent window from index.html');
    }, false)

</script>


</body>
</html>